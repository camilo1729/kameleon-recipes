# Install extlinux bootloader

- extlinux_theme: none

- install_bootloader:
  - exec_out: DISTRIB_TITLE="$$kameleon_recipe_name"
  - write_out:
    - $$rootfs/etc/default/extlinux
    - |
      ## /etc/default/extlinux - configuration file for extlinux-update(8)
      EXTLINUX_UPDATE="true"
      EXTLINUX_ALTERNATIVES="default recovery"
      EXTLINUX_DEFAULT="l0"
      EXTLINUX_ENTRIES="all"
      EXTLINUX_MEMDISK="true"
      EXTLINUX_MEMDISK_DIRECTORY="/boot"
      EXTLINUX_MENU_LABEL="${DISTRIB_TITLE^}, kernel"
      EXTLINUX_OS_PROBER="true"
      EXTLINUX_PARAMETERS="ro quiet"
      EXTLINUX_ROOT=""
      EXTLINUX_THEME="$$extlinux_theme"
      EXTLINUX_TIMEOUT="1"
  - exec_out: chroot $$rootfs extlinux --install /boot/extlinux 2>&1
  - exec_out: chroot $$rootfs extlinux-update 2>&1
