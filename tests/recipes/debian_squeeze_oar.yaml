#### Basic Debian Kameleon recipe ###
global:
  workdir_base: /tmp/kameleon
  workdir: /tmp/kameleon
  distrib: debian
  debian_version_name: squeeze
 # distrib_repository:  http://archive.debian.org/debian-archive/debian/
  distrib_repository:  http://ftp.fr.debian.org/debian/
  output_environment_file_system_type: ext4
  include_dir: scripts
  arch: amd64
  kernel_arch: "amd64"
  network_hostname: "test"
  extra_packages: "openssh-server "
  checkpoint_file:  "/tmp/kameleon/squeeze_debian.tgz"
  extra_packages: "mysql-server mysql-client mingetty"
  network_hostname: "test"
  checkpoint_file: /tmp/kameleon/checkpoint.tgz
  oar_repository: "deb http://oar-ftp.imag.fr/oar/2.5/debian/ squeeze main"
  user_name: "kameleon"
steps:
# Checking availability of tools used during the process
  - debian_check_deps
  - check_deps:
     - rsync
     - building_kvm_images
  - bootstrap
# Some system coniguration
  - system_config
  - root_passwd
  - software_install:
     - extra_packages
  - oar/oar_testing_old_versions
  - oar_2.5/oar_debian_install
  - oar/oar_system_config
  - oar_2.5/oar_config
  - oar/oar_config
  - autologin
  - mount_proc
  - kernel_install
  - strip
  - umount_proc
#Building the appliance
  - build_appliance_kpartx:
     - clean_udev
     - create_raw_image
     - attach_kpartx_device
     - mkfs
     - mount_image
     - copy_system_tree
     - get_kernel_initrd
     - install_extlinux
     - umount_image
     - save_as_raw 
     - save_as_vdi
  - clean
  